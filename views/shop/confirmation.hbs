<style>
    .toolEll {
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        max-width: 150px;
    }
</style>

<!--================Order Details Area =================-->
<section class="order_details section-margin--small">
    <div class="container">
        <p class="text-center billing-alert">Thank you. Your order has been received.</p>
        <div class="row mb-5">
            <div class="col-md-6 col-xl-4 mb-4 mb-xl-0">
                <div class="confirmation-card">
                    <h3 class="billing-title">Order Info</h3>
                    <table class="order-rable">
                        <div  id="orderDate" hidden>{{order.date}}</div>
                        <tr>
                            <td>Order Id</td>
                            <td>{{order.orderNo}}</td>
                        </tr>
                        <tr>
                            <td>Date</td> 
                            <td id="modifiedDate"></td>
                            
                        </tr>
                        <tr>
                            <td>Total</td>
                            <td>{{order.totalAmount}}</td>
                        </tr>
                        <tr>
                            <td>Payment</td>
                            <td>{{order.paymentMethod}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-6 col-xl-4 mb-4 mb-xl-0">
                <div class="confirmation-card">
                    <h3 class="billing-title">Billing Address</h3>
                    <table class="order-rable">
                        <tr>
                            <td>House</td>
                            <td>{{order.address.houseName}}</td>
                        </tr>
                        <tr>
                            <td>City</td>
                            <td>{{order.address.city}}</td>
                        </tr>
                        <tr>
                            <td>State</td>
                            <td>{{order.address.state}}</td>
                        </tr>
                        <tr>
                            <td>Postcode</td>
                            <td>{{order.address.pincode}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-6 col-xl-4 mb-4 mb-xl-0">
                <div class="confirmation-card">
                    <h3 class="billing-title">Shipping Address</h3>
                    <table class="order-rable">
                        <tr>
                            <td>House</td>
                            <td>{{order.address.houseName}}</td>
                        </tr>
                        <tr>
                            <td>City</td>
                            <td>{{order.address.city}}</td>
                        </tr>
                        <tr>
                            <td>State</td>
                            <td>{{order.address.state}}</td>
                        </tr>
                        <tr>
                            <td>Postcode</td>
                            <td>{{order.address.pincode}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="order_details_table">
            <h2>Order Details</h2>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Product</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each order.items}}
                        <tr>
                            <td>
                                <p class="toolEll">{{this.product.productName}}</p>
                            </td>
                            <td>
                                <h5>x {{this.quantity}}</h5>
                            </td>
                            <td>
                                <p>₹ <span class="productTotal">{{this.productTotal}}</span></p>
                            </td>
                        </tr>
                        {{/each}}
                        
                        <tr>
                            <td>
                                <h4>Subtotal</h4>
                            </td>
                            <td>
                                <h5></h5>
                            </td>
                            <td>
                                <p>₹ <span id="subtotal"></span></p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h4>Shipping</h4>
                            </td>
                            <td>
                                <h5></h5>
                            </td>
                            <td>
                                <p>Flat rate: ₹ 50.00</p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h4>Tax & Charges</h4>
                            </td>
                            <td>
                                <h5></h5>
                            </td>
                            <td>
                                <p>₹ 100.00</p>
                            </td>
                        </tr>
                        {{#if order.discount}}
                        <tr>
                            <td>
                                <h4>Discount</h4>
                            </td>
                            <td>
                                <h5></h5>
                            </td>
                            <td>
                                <p>Coupon: - ( ₹ <span>{{order.discount}}</span> ) </p>
                            </td>
                        </tr>
                        {{/if}}
                        <tr>
                            <td>
                                <h4>Total</h4>
                            </td>
                            <td>
                                <h5></h5>
                            </td>
                            <td>
                                <h4>₹ {{order.totalAmount}}</h4>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
<!--================End Order Details Area =================-->


<script>
    let subtotal = 0;
    let total = document.getElementsByClassName('productTotal');
    for(let i=0; i<total.length; i++){
        subtotal += +total[i].innerHTML;
    } 
    document.getElementById('subtotal').innerHTML = subtotal;
</script>

<script>
    let timestamp = document.getElementById('orderDate').innerHTML;
    const day = timestamp.substring(8, 10)
    const month = timestamp.substring(5, 7);
    const year = timestamp.substring(0,4);
    const formattedDate = `${day}- ${month} -${year}`;

    document.getElementById('modifiedDate').innerHTML = formattedDate;

</script>